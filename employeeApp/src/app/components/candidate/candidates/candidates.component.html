

<header class="header-container">
  <div class="filter-container">
    @for (filter of paramsList; track filter.id) {
      <button mat-raised-button class="filter-button" (click)="toggleFilter(filter)">
        <span class="material-icons">{{ filter.icon }}</span>
        {{ filter.filter }}
      </button>
    }

    <button (click)="startFilter()" mat-raised-button class="filter-button">
      <span class="material-icons">search</span>
    </button>
  </div>

  <div class="filter-inputs">
    @if (selectedFilter === 'Experience') {
      <div>
        <label>Years of Experience:</label>
        <input matInput type="number" [(ngModel)]="experienceYears" placeholder="Enter years" />
      </div>
    }

    @if(selectedFilter === 'Mark') {
      <div>
        <label>mark more than:</label>
        <input matInput type="number" [(ngModel)]="testMark" placeholder="Enter the minimum mark" />
      </div>
    }
    @if (selectedFilter === 'Languages') {
      <div>
        <label>Choose Programming Languages:</label>
        <mat-select multiple [(ngModel)]="selectedLanguages">
          @for (lang of programmingLanguages; track lang) {
            <mat-option [value]="lang">{{ lang }}</mat-option>
          }
        </mat-select>
      </div>
    }

    @if (selectedFilter === 'EnglishLevel') {
      <div>
        <label>English Level:</label>
        <mat-radio-group [(ngModel)]="englishLevel">
          <mat-radio-button value="Beginner">Beginner</mat-radio-button>
          <mat-radio-button value="Intermediate">Intermediate</mat-radio-button>
          <mat-radio-button value="Advanced">Advanced</mat-radio-button>
          <mat-radio-button value="Fluent">Fluent</mat-radio-button>
        </mat-radio-group>
      </div>
    }

    @if (selectedFilter === 'Education') {
      <div>
        <label>Education:</label>
        <mat-select [(ngModel)]="educationLevel">
          <mat-option value="College">College</mat-option>
          <mat-option value="University">University</mat-option>
          <mat-option value="Another">Another</mat-option>
        </mat-select>
      </div>
    }
  </div>
</header>


@defer (on idle) {
  @for (candidate of candidatesList$ | async; track candidate.id) {
    <app-candidate-display [candidate]="candidate"></app-candidate-display>
  } 
} @loading {
  <div class="spinner-container">
    <mat-progress-spinner
      color="primary"
      mode="indeterminate"
      diameter="50">
    </mat-progress-spinner>
    <div>Loading candidates...</div>
  </div>
} @error {
  <div class="error-message">
    Failed to load candidates. Please try again later.
  </div>
}
